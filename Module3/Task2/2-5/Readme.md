Тип файла определяется через stat. При этом необходимо сформировать полный путь до текущего файла, т.е. взять путь из отправленных аргументов и соединить с именем текущего файла.