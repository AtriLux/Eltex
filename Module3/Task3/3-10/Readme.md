При получении сообщений из очереди нужно, чтобы буфер имел размеры, равные или больше, чем максимально возможные в очереди. Для того, чтобы узнать данные размеры, создается структура атрибутов очереди, в нее считываются данные (mq_getattr) и далее создается подходящий буфер.

Очередь удаляется программой-получателем после того, как все сообщения были считаны.
